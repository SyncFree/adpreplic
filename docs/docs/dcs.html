<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Module dcs</title>
<link rel="stylesheet" type="text/css" href="stylesheet.css" title="EDoc">
</head>
<body bgcolor="white">
<div class="navbar"><a name="#navbar_top"></a><table width="100%" border="0" cellspacing="0" cellpadding="2" summary="navigation bar"><tr><td><a href="overview-summary.html" target="overviewFrame">Overview</a></td><td><a href="http://www.erlang.org/"><img src="erlang.png" align="right" border="0" alt="erlang logo"></a></td></tr></table></div>
<hr>

<h1>Module dcs</h1>
<ul class="index"><li><a href="#description">Description</a></li><li><a href="#index">Function Index</a></li><li><a href="#functions">Function Details</a></li></ul>Provides operations required in a database.

<p><b>Version:</b> 1.0.0</p>
<p><b>Authors:</b> Amadeo Asco.</p>
<p><b>References</b><ul><li>Project <a href="https://syncfree.lip6.fr/">SyncFree</a></li><li>More courses at <a href="http://www.trifork.com">Trifork Leeds</a></li></ul></p>

<h2><a name="description">Description</a></h2>Provides operations required in a database.
<h2><a name="index">Function Index</a></h2>
<table width="100%" border="1" cellspacing="0" cellpadding="2" summary="function index"><tr><td valign="top"><a href="#create-2">create/2</a></td><td>Creates the local replica.</td></tr>
<tr><td valign="top"><a href="#createReplica-1">createReplica/1</a></td><td>Creates a replica locally and notify all existing DC with replicas of the new replica.</td></tr>
<tr><td valign="top"><a href="#createReplica-2">createReplica/2</a></td><td>Creates the replica locally.</td></tr>
<tr><td valign="top"><a href="#forwardMsg-2">forwardMsg/2</a></td><td>Forwards the specified message to one of the DCs with replica and waits for the response.</td></tr>
<tr><td valign="top"><a href="#forwardMsg-3">forwardMsg/3</a></td><td>Forwards the specified message to one of the DCs with replica and waits for the response id
 		WaitReply is true.</td></tr>
<tr><td valign="top"><a href="#getAllDCs-0">getAllDCs/0*</a></td><td>The list of all the DCs.</td></tr>
<tr><td valign="top"><a href="#getDCsReplica-1">getDCsReplica/1</a></td><td>Provides the current list of DCs with replica.</td></tr>
<tr><td valign="top"><a href="#getNewID-0">getNewID/0*</a></td><td>Provides a new ID.</td></tr>
<tr><td valign="top"><a href="#getNumRemovedFromReplicas-1">getNumRemovedFromReplicas/1*</a></td><td>Sends message to the replication layer.</td></tr>
<tr><td valign="top"><a href="#getNumRemovedFromReplicas-3">getNumRemovedFromReplicas/3*</a></td><td></td></tr>
<tr><td valign="top"><a href="#getNumReplicas-0">getNumReplicas/0*</a></td><td>Provides the current number of replicas.</td></tr>
<tr><td valign="top"><a href="#getReplicationLayerPid-1">getReplicationLayerPid/1*</a></td><td>Provides the local Replication Layer process ID for the specified data.</td></tr>
<tr><td valign="top"><a href="#newReplica-2">newReplica/2</a></td><td>Sends a new replica message to the replication layer.</td></tr>
<tr><td valign="top"><a href="#read-1">read/1</a></td><td>Reads the data locally.</td></tr>
<tr><td valign="top"><a href="#rmvFromReplica-2">rmvFromReplica/2</a></td><td>Removes this replica if the data is sufficiently replicated and notify all other replicas.</td></tr>
<tr><td valign="top"><a href="#rmvReplica-2">rmvReplica/2</a></td><td>Sends a removed replica message to the replication layer.</td></tr>
<tr><td valign="top"><a href="#send-2">send/2*</a></td><td>Sends message to the replication layer.</td></tr>
<tr><td valign="top"><a href="#send-3">send/3*</a></td><td>Sends message to the replication layer.</td></tr>
<tr><td valign="top"><a href="#sendReply-4">sendReply/4</a></td><td>Builds a reply message and sends it to the specified destination.</td></tr>
<tr><td valign="top"><a href="#sendToAllDCs-1">sendToAllDCs/1*</a></td><td>Sends the specified message to all the DCs.</td></tr>
<tr><td valign="top"><a href="#sendToDCs-2">sendToDCs/2*</a></td><td>Sends the specified message to each of the provided list of DCs.</td></tr>
<tr><td valign="top"><a href="#sendToDCsReplica-2">sendToDCsReplica/2*</a></td><td>Sends the specified message to all the DCs with replica.</td></tr>
<tr><td valign="top"><a href="#sendToOneDC-2">sendToOneDC/2*</a></td><td>Sends the specified message to one of DCs with replica.</td></tr>
<tr><td valign="top"><a href="#setDCsReplica-2">setDCsReplica/2</a></td><td>Sets the list of DCs with replica.</td></tr>
<tr><td valign="top"><a href="#update-2">update/2*</a></td><td>Updates the local replica.</td></tr>
<tr><td valign="top"><a href="#updates-2">updates/2</a></td><td>Updates the local replica and sends appropiate messages to the other DCs with replicas to
 		update their replica too.</td></tr>
<tr><td valign="top"><a href="#write-2">write/2</a></td><td>Writes the specified value into the local data and forward update messages to the other DCs
  with replicas.</td></tr>
</table>

<h2><a name="functions">Function Details</a></h2>

<h3 class="function"><a name="create-2">create/2</a></h3>
<div class="spec">
<p><tt>create(Key, Value) -&gt; Result::<a href="#type-typle">typle()</a></tt><br></p>
</div><p>Creates the local replica. The result may have the values {ok} or {error, ErrorCode}</p>

<h3 class="function"><a name="createReplica-1">createReplica/1</a></h3>
<div class="spec">
<p><tt>createReplica(Key) -&gt; Result::<a href="#type-typle">typle()</a></tt><br></p>
</div><p>Creates a replica locally and notify all existing DC with replicas of the new replica. The
 		result may have the values {ok} or {error, ErrorCode}.</p>

<h3 class="function"><a name="createReplica-2">createReplica/2</a></h3>
<div class="spec">
<p><tt>createReplica(Key, Value) -&gt; Result::<a href="#type-typle">typle()</a></tt><br></p>
</div><p>Creates the replica locally. The result may have the values {ok} or {error, ErrorCode}</p>

<h3 class="function"><a name="forwardMsg-2">forwardMsg/2</a></h3>
<div class="spec">
<p><tt>forwardMsg(Key, Msg) -&gt; Response::tuple()</tt><br></p>
</div><p>Forwards the specified message to one of the DCs with replica and waits for the response.
 		This execution is synchronous. The result values are Response, {error::atom(),
 		invalid_msg_format} or {error::atom(), timeout::atom()}.</p>

<h3 class="function"><a name="forwardMsg-3">forwardMsg/3</a></h3>
<div class="spec">
<p><tt>forwardMsg(Key, Msg, WaitReply::boolean()) -&gt; Response::tuple()</tt><br></p>
</div><p>Forwards the specified message to one of the DCs with replica and waits for the response id
 		WaitReply is true. The possible result values are Response, {id::atom(), Id::integer()},
 		{error::atom(), invalid_msg_format} or {error::atom(), timeout::atom()}.</p>

<h3 class="function"><a name="getAllDCs-0">getAllDCs/0 *</a></h3>
<div class="spec">
<p><tt>getAllDCs() -&gt; DCs::list()</tt><br></p>
</div><p>The list of all the DCs.</p>

<h3 class="function"><a name="getDCsReplica-1">getDCsReplica/1</a></h3>
<div class="spec">
<p><tt>getDCsReplica(Key) -&gt; DCs::list()</tt><br></p>
</div><p>Provides the current list of DCs with replica.</p>

<h3 class="function"><a name="getNewID-0">getNewID/0 *</a></h3>
<div class="spec">
<p><tt>getNewID() -&gt; Id::integer()</tt><br></p>
</div><p>Provides a new ID.</p>

<h3 class="function"><a name="getNumRemovedFromReplicas-1">getNumRemovedFromReplicas/1 *</a></h3>
<div class="spec">
<p><tt>getNumRemovedFromReplicas(Sender::pid()) -&gt; NumRemoved::integer()</tt><br></p>
</div><p>Sends message to the replication layer.</p>

<h3 class="function"><a name="getNumRemovedFromReplicas-3">getNumRemovedFromReplicas/3 *</a></h3>
<div class="spec">
<p><tt>getNumRemovedFromReplicas(Sender, NumReplicas, NumResponses) -&gt; any()</tt></p>
</div>

<h3 class="function"><a name="getNumReplicas-0">getNumReplicas/0 *</a></h3>
<div class="spec">
<p><tt>getNumReplicas() -&gt; NumReplicas::integer()</tt><br></p>
</div><p>Provides the current number of replicas.</p>

<h3 class="function"><a name="getReplicationLayerPid-1">getReplicationLayerPid/1 *</a></h3>
<div class="spec">
<p><tt>getReplicationLayerPid(Key) -&gt; Pid::pid()</tt><br></p>
</div><p>Provides the local Replication Layer process ID for the specified data.</p>

<h3 class="function"><a name="newReplica-2">newReplica/2</a></h3>
<div class="spec">
<p><tt>newReplica(Key, Dc) -&gt; {ok}</tt><br></p>
</div><p>Sends a new replica message to the replication layer.</p>

<h3 class="function"><a name="read-1">read/1</a></h3>
<div class="spec">
<p><tt>read(Key) -&gt; Result::<a href="#type-typle">typle()</a></tt><br></p>
</div><p>Reads the data locally. The result may have the values {ok, Value} or {error, ErrorCode}.</p>

<h3 class="function"><a name="rmvFromReplica-2">rmvFromReplica/2</a></h3>
<div class="spec">
<p><tt>rmvFromReplica(Key, MinNumReplicas::integer()) -&gt; Result::<a href="#type-typle">typle()</a></tt><br></p>
</div><p>Removes this replica if the data is sufficiently replicated and notify all other replicas.
 		The result may have the values {ok} or {error, insuficient_replicas}.</p>

<h3 class="function"><a name="rmvReplica-2">rmvReplica/2</a></h3>
<div class="spec">
<p><tt>rmvReplica(Key, Dc::pid()) -&gt; {ok}</tt><br></p>
</div><p>Sends a removed replica message to the replication layer.</p>

<h3 class="function"><a name="send-2">send/2 *</a></h3>
<div class="spec">
<p><tt>send(Type::atom(), Key) -&gt; Result::tuple()</tt><br></p>
</div><p>Sends message to the replication layer. The results may have one of these values {ok} or
 		{error, ErrorCode}</p>

<h3 class="function"><a name="send-3">send/3 *</a></h3>
<div class="spec">
<p><tt>send(Type::atom(), Key, Value) -&gt; Result::tuple()</tt><br></p>
</div><p>Sends message to the replication layer.</p>

<h3 class="function"><a name="sendReply-4">sendReply/4</a></h3>
<div class="spec">
<p><tt>sendReply(Destination::pid(), Type::atom(), Id::integer(), Result) -&gt; {ok}</tt><br></p>
</div><p>Builds a reply message and sends it to the specified destination. Reduces the chances of
 		making mistakes when building a reply message, keeping the format hidden.</p>

<h3 class="function"><a name="sendToAllDCs-1">sendToAllDCs/1 *</a></h3>
<div class="spec">
<p><tt>sendToAllDCs(Msg) -&gt; {ok}</tt><br></p>
</div><p>Sends the specified message to all the DCs.</p>

<h3 class="function"><a name="sendToDCs-2">sendToDCs/2 *</a></h3>
<div class="spec">
<p><tt>sendToDCs(DCs::list(), Msg) -&gt; {ok}</tt><br></p>
</div><p>Sends the specified message to each of the provided list of DCs.</p>

<h3 class="function"><a name="sendToDCsReplica-2">sendToDCsReplica/2 *</a></h3>
<div class="spec">
<p><tt>sendToDCsReplica(Key, Msg) -&gt; {ok}</tt><br></p>
</div><p>Sends the specified message to all the DCs with replica.</p>

<h3 class="function"><a name="sendToOneDC-2">sendToOneDC/2 *</a></h3>
<div class="spec">
<p><tt>sendToOneDC(Key::Msg, Msg::Index) -&gt; {ok}</tt><br></p>
</div><p>Sends the specified message to one of DCs with replica.</p>

<h3 class="function"><a name="setDCsReplica-2">setDCsReplica/2</a></h3>
<div class="spec">
<p><tt>setDCsReplica(Key, DCs::list()) -&gt; Result::atom()</tt><br></p>
</div><p>Sets the list of DCs with replica. If the DC has an interal copy of the data then it is
 		replicated, otherwise it is not. The result expected may any of {ok, Replicated} or
 		{error, ErrorCode}.</p>

<h3 class="function"><a name="update-2">update/2 *</a></h3>
<div class="spec">
<p><tt>update(Key, Value) -&gt; {ok}</tt><br></p>
</div><p>Updates the local replica.</p>

<h3 class="function"><a name="updates-2">updates/2</a></h3>
<div class="spec">
<p><tt>updates(Key, Value) -&gt; Result</tt><br></p>
</div><p>Updates the local replica and sends appropiate messages to the other DCs with replicas to
 		update their replica too. Returns the message ID used to send update message to other DCs.</p>

<h3 class="function"><a name="write-2">write/2</a></h3>
<div class="spec">
<p><tt>write(Key, Value) -&gt; Result::<a href="#type-typle">typle()</a></tt><br></p>
</div><p>Writes the specified value into the local data and forward update messages to the other DCs
  with replicas. The result may have the values {ok} or {error, ErrorCode}.</p>
<hr>

<div class="navbar"><a name="#navbar_bottom"></a><table width="100%" border="0" cellspacing="0" cellpadding="2" summary="navigation bar"><tr><td><a href="overview-summary.html" target="overviewFrame">Overview</a></td><td><a href="http://www.erlang.org/"><img src="erlang.png" align="right" border="0" alt="erlang logo"></a></td></tr></table></div>
<p><i>Generated by EDoc, Nov 24 2014, 11:20:17.</i></p>
</body>
</html>
